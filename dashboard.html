<!DOCTYPE html>
<html>
<head>
<title>PowerMax Dashboard</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{font-family:Arial;background:#0c0f24;color:white;text-align:center}
button{padding:12px 20px;margin:8px;border:none;border-radius:8px;background:#ffb300;font-weight:bold}
#wheel{width:250px;height:250px;border-radius:50%;border:8px solid white;margin:auto;background:conic-gradient(#ff3,#f33,#3f3,#33f,#f0f,#0ff,#ffa,#faa)}
</style>
</head>
<body>

<h2>ðŸŽ¡ Spin & Earn Dashboard</h2>

<h3>Balance: <span id="balance">0</span> Points</h3>
<h4>Spins Left: <span id="spinsLeft">5</span></h4>

<div id="wheel"></div><br>
<button onclick="spin()">SPIN</button>

<br><br>
<button onclick="showAd()">Watch Ad & Get Reward</button>
<button onclick="withdraw()">Withdraw</button>
<button onclick="copyReferral()">Referral Link</button>

<p id="result"></p>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>

<script>
// ðŸ”¥ Firebase Config (Ø§Ù¾Ù†Ø§ Ù„Ú¯Ø§Ø¦ÛŒÚº)
const firebaseConfig = {
  apiKey: "YOUR_KEY",
  authDomain: "YOUR_DOMAIN",
  databaseURL: "YOUR_DB_URL",
  projectId: "YOUR_ID",
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

// ðŸ‘¤ USER ID
let uid = localStorage.getItem("uid");
if(!uid){
  uid = "user_" + Math.random().toString(36).substr(2,9);
  localStorage.setItem("uid", uid);
}

// ðŸ”„ Referral System
const urlParams = new URLSearchParams(window.location.search);
const ref = urlParams.get("ref");
if(ref){
  firebase.database().ref("referrals/"+ref+"/"+uid).set(true);
}

// ðŸŽ¯ DATA
let balance = Number(localStorage.getItem("balance")||0);
let spins = Number(localStorage.getItem("spins")||5);
document.getElementById("balance").innerText = balance;
document.getElementById("spinsLeft").innerText = spins;

let lastReward = 0;

// ðŸŽ¡ SPIN
function spin(){
  if(spins<=0){ alert("No spins left"); return; }
  
  spins--;
  localStorage.setItem("spins", spins);
  document.getElementById("spinsLeft").innerText = spins;

  // random points (1-5)
  lastReward = Math.floor(Math.random()*5)+1;
  
  document.getElementById("result").innerHTML = "You won "+lastReward+" points. Watch Ad to claim!";
}

// ðŸ“¢ SAFE AD BUTTON
function showAd(){
  if(lastReward==0){ alert("Spin first"); return; }

  // ðŸ‘‰ ÛŒÛØ§Úº Ø§Ù¾Ù†Ø§ Adsterra code Ù„Ú¯Ø§Ø¦ÛŒÚº
  alert("Ad Playing... (Demo)");

  // After Ad
  balance += lastReward;
  lastReward = 0;

  localStorage.setItem("balance", balance);
  document.getElementById("balance").innerText = balance;

  // Save Firebase
  firebase.database().ref("users/"+uid).set({
    balance: balance,
    spins: spins
  });

  document.getElementById("result").innerHTML = "âœ… Congratulations! Points added!";
}

// ðŸ’¸ Withdraw
function withdraw(){
  alert("Withdraw request sent!");
}

// ðŸ‘¥ Referral Link
function copyReferral(){
  let link = "https://powermaxearning.github.io/powermax/?ref="+uid;
  navigator.clipboard.writeText(link);
  alert("Referral Link Copied:\n"+link);
}
</script>

</body>
</html>
